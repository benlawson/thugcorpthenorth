<!DOCTYPE html>
<html>
  <head> 
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/maps.css') }}">
    <meta charset="utf-8">
    <title>Info windows</title>
    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #map {
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>

function initMap() {
  var location = {lat: parseFloat('{{ latitude }}'), lng: parseFloat('{{ longitude }}')};
  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 13,
    center: location
  });

  var contentString1 = '<div id="content">'+'<div id="siteNotice">'+'</div>'+'<h1 id="firstHeading" class="firstHeading">{{ results[0]["name"] }}</h1>'+'<p> {{ results[0]["address"] }} </p> </div>'+'</div>';
  var contentString2 = '<div id="content">'+'<div id="siteNotice">'+'</div>'+'<h1 id="firstHeading" class="firstHeading">{{ results[1]["name"] }}</h1>'+'<p> {{ results[1]["address"] }} </p> </div>'+'</div>';
  var contentString3 = '<div id="content">'+'<div id="siteNotice">'+'</div>'+'<h1 id="firstHeading" class="firstHeading">{{ results[2]["name"] }}</h1>'+'<p> {{ results[2]["address"] }} </p> </div>'+'</div>';

  var infowindow1 = new google.maps.InfoWindow({
    content: contentString1
  });
  var infowindow2 = new google.maps.InfoWindow({
    content: contentString2
  });
  var infowindow3 = new google.maps.InfoWindow({
    content: contentString3
  });

  var location1 = {lat: parseFloat('{{ results[0]["latitude"] }}'), lng: parseFloat('{{ results[0]["longitude"] }}')};
  var marker1 = new google.maps.Marker({
      content: contentString1,
      position: location1,
      map: map,
      title: 'Location 1'
  });

  var location2 = {lat: parseFloat('{{ results[1]["latitude"] }}'), lng: parseFloat('{{ results[1]["longitude"] }}')};
  var marker2 = new google.maps.Marker({
      content: contentString2,
      position: location2,
      map: map,
      title: 'Location 2'
  });

  var location3 = {lat: parseFloat('{{ results[2]["latitude"] }}'), lng: parseFloat('{{ results[2]["longitude"] }}')};
  var marker3 = new google.maps.Marker({
      content: contentString3,
      position: location3,
      map: map,
      title: 'Location 3'
  });

  marker1.addListener('click', function() {
    infowindow2.close();
    infowindow3.close();
    infowindow1.open(map, marker1);
  });
  marker2.addListener('click', function() {
    infowindow1.close();
    infowindow3.close();
    infowindow2.open(map, marker2);
  });
  marker3.addListener('click', function() {
    infowindow1.close();
    infowindow2.close();
    infowindow3.open(map, marker3);
  });

  var sunCircle = {
        strokeColor: "#c3fc49",
        strokeOpacity: 0.8,
        strokeWeight: 2,
        fillColor: "#c3fc49",
        fillOpacity: 0.35,
        map: map,
        center: location,
        radius: 5000 // in meters
    };
  cityCircle = new google.maps.Circle(sunCircle);

}
    </script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDkpuFR0W-sLK_bS9sHJBMkUMzC6g8TANw&signed_in=true&callback=initMap"></script>
  </body>
</html>